@using Microsoft.AspNet.Identity
@model YelpCamp.Dtos.CampgroundDTO

@{
    ViewBag.Title = "Details";
}
@Html.HiddenFor(m => m.Id)
<div class="container" style="margin-top:20px">
    <div class="row">
        <div class="col-md-3">
            <p class="lead">YelpCamp</p>
            <div class="list-group">
                <li class="list-group-item active">Info 1</li>
                <li class="list-group-item">Info 2</li>
                <li class="list-group-item">Info 3</li>
            </div>
        </div>
        <div class="col-md-9">
            <div class="thumbnail">
                <img class="img-responsive" src="@Model.Image" style="height:401px">
                <div class="caption-full">
                    <h4 class="pull-right">$@Model.Price/night</h4>
                    <h4><a>@Model.Name</a></h4>
                    <p>@Model.Description</p>
                    <p>
                        <em>Submitted By<b> @Model.UserName</b></em>
                    </p>
                    @if (User.Identity.GetUserId() == Model.UserId)
                    {
                         @Html.ActionLink("Edit", "Edit", "Campground", new { CampId = Model.Id }, new { @class = "btn btn-warning" , style = "margin-right:5px" })
                         @Html.ActionLink("Delete", "Delete", "Campground", new { CampId = Model.Id }, new { @class = "btn btn-danger" })
                    }
                </div>
            </div>
            <div class="well">
                <div class="text-right">
                    @Html.ActionLink("Add New Comment", "CreateComment", "Comment", new { CampgroundId = Model.Id }, new { @class = "btn btn-success" })
                </div>
                <hr>
                @if (Model.Comments != null)
                {
                    foreach (var comment in Model.Comments)
                    {
                        <div class="row">
                            <div class="col-md-12">
                                <strong>@comment.ApplicationUser.UserName</strong>
                                <span class="pull-right">10 days ago</span>
                                <p>
                                    @comment.Text
                                </p>
                                @if (User.Identity.GetUserId() == comment.ApplicationUserId)
                                {
                                    @Html.ActionLink("Edit", "Edit", "Comment", new { CampId = Model.Id, CommentId = comment.Id }, new { @class = "btn btn-xs btn-warning", style = "margin-right:3px" })
                                    @Html.ActionLink("Delet", "Delete", "Comment", new { CampId = Model.Id, CommentId = comment.Id }, new { @class = "btn btn-xs btn-danger" })
                                }
                             </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>



<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
